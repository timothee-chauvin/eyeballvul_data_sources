{"schema_version":"1.7.3","id":"CVE-2023-54323","published":"2025-12-30T12:37:07.656Z","modified":"2025-12-31T06:05:53.344281Z","summary":"cxl/pmem: Fix nvdimm registration races","details":"In the Linux kernel, the following vulnerability has been resolved:\n\ncxl/pmem: Fix nvdimm registration races\n\nA loop of the form:\n\n    while true; do modprobe cxl_pci; modprobe -r cxl_pci; done\n\n...fails with the following crash signature:\n\n    BUG: kernel NULL pointer dereference, address: 0000000000000040\n    [..]\n    RIP: 0010:cxl_internal_send_cmd+0x5/0xb0 [cxl_core]\n    [..]\n    Call Trace:\n     <TASK>\n     cxl_pmem_ctl+0x121/0x240 [cxl_pmem]\n     nvdimm_get_config_data+0xd6/0x1a0 [libnvdimm]\n     nd_label_data_init+0x135/0x7e0 [libnvdimm]\n     nvdimm_probe+0xd6/0x1c0 [libnvdimm]\n     nvdimm_bus_probe+0x7a/0x1e0 [libnvdimm]\n     really_probe+0xde/0x380\n     __driver_probe_device+0x78/0x170\n     driver_probe_device+0x1f/0x90\n     __device_attach_driver+0x85/0x110\n     bus_for_each_drv+0x7d/0xc0\n     __device_attach+0xb4/0x1e0\n     bus_probe_device+0x9f/0xc0\n     device_add+0x445/0x9c0\n     nd_async_device_register+0xe/0x40 [libnvdimm]\n     async_run_entry_fn+0x30/0x130\n\n...namely that the bottom half of async nvdimm device registration runs\nafter the CXL has already torn down the context that cxl_pmem_ctl()\nneeds. Unlike the ACPI NFIT case that benefits from launching multiple\nnvdimm device registrations in parallel from those listed in the table,\nCXL is already marked PROBE_PREFER_ASYNCHRONOUS. So provide for a\nsynchronous registration path to preclude this scenario.","affected":[{"ranges":[{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"21083f51521fb0f60dbac591f175c3ed48435af4"},{"fixed":"a371788d4f4a7f59eecd22644331d599979fd283"},{"fixed":"18c65667fa9104780eeaa0dc1bc240f0c2094772"},{"fixed":"f57aec443c24d2e8e1f3b5b4856aea12ddda4254"}]}],"versions":["v5.13","v5.13-rc6","v5.13-rc7","v5.14","v5.14-rc1","v5.14-rc2","v5.14-rc3","v5.14-rc4","v5.14-rc5","v5.14-rc6","v5.14-rc7","v5.15","v5.15-rc1","v5.15-rc2","v5.15-rc3","v5.15-rc4","v5.15-rc5","v5.15-rc6","v5.15-rc7","v5.16","v5.16-rc1","v5.16-rc2","v5.16-rc3","v5.16-rc4","v5.16-rc5","v5.16-rc6","v5.16-rc7","v5.16-rc8","v5.17","v5.17-rc1","v5.17-rc2","v5.17-rc3","v5.17-rc4","v5.17-rc5","v5.17-rc6","v5.17-rc7","v5.17-rc8","v5.18","v5.18-rc1","v5.18-rc2","v5.18-rc3","v5.18-rc4","v5.18-rc5","v5.18-rc6","v5.18-rc7","v5.19","v5.19-rc1","v5.19-rc2","v5.19-rc3","v5.19-rc4","v5.19-rc5","v5.19-rc6","v5.19-rc7","v5.19-rc8","v6.0","v6.0-rc1","v6.0-rc2","v6.0-rc3","v6.0-rc4","v6.0-rc5","v6.0-rc6","v6.0-rc7","v6.1","v6.1-rc1","v6.1-rc2","v6.1-rc3","v6.1-rc4","v6.1-rc5","v6.1-rc6","v6.1-rc7","v6.1-rc8","v6.1.1","v6.1.10","v6.1.11","v6.1.12","v6.1.13","v6.1.14","v6.1.15","v6.1.2","v6.1.3","v6.1.4","v6.1.5","v6.1.6","v6.1.7","v6.1.8","v6.1.9","v6.2","v6.2-rc1","v6.2-rc2","v6.2-rc3","v6.2-rc4","v6.2-rc5","v6.2-rc6","v6.2-rc7","v6.2-rc8","v6.2.1","v6.2.2"],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2023-54323.json"}},{"package":{"name":"Kernel","ecosystem":"Linux"},"ranges":[{"type":"ECOSYSTEM","events":[{"introduced":"5.14.0"},{"fixed":"6.1.16"}]},{"type":"ECOSYSTEM","events":[{"introduced":"6.2.0"},{"fixed":"6.2.3"}]}],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2023-54323.json"}}],"references":[{"type":"PACKAGE","url":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git"},{"type":"WEB","url":"https://git.kernel.org/stable/c/18c65667fa9104780eeaa0dc1bc240f0c2094772"},{"type":"WEB","url":"https://git.kernel.org/stable/c/a371788d4f4a7f59eecd22644331d599979fd283"},{"type":"WEB","url":"https://git.kernel.org/stable/c/f57aec443c24d2e8e1f3b5b4856aea12ddda4254"},{"type":"ADVISORY","url":"https://github.com/CVEProject/cvelistV5/tree/main/cves/2023/54xxx/CVE-2023-54323.json"},{"type":"ADVISORY","url":"https://nvd.nist.gov/vuln/detail/CVE-2023-54323"}],"database_specific":{"cna_assigner":"Linux","osv_generated_from":"https://github.com/CVEProject/cvelistV5/tree/main/cves/2023/54xxx/CVE-2023-54323.json"}}