{"schema_version":"1.7.3","id":"CVE-2024-46867","published":"2024-09-27T12:42:55.025Z","modified":"2025-11-20T05:56:58.310060Z","summary":"drm/xe/client: fix deadlock in show_meminfo()","details":"In the Linux kernel, the following vulnerability has been resolved:\n\ndrm/xe/client: fix deadlock in show_meminfo()\n\nThere is a real deadlock as well as sleeping in atomic() bug in here, if\nthe bo put happens to be the last ref, since bo destruction wants to\ngrab the same spinlock and sleeping locks.  Fix that by dropping the ref\nusing xe_bo_put_deferred(), and moving the final commit outside of the\nlock. Dropping the lock around the put is tricky since the bo can go\nout of scope and delete itself from the list, making it difficult to\nnavigate to the next list entry.\n\n(cherry picked from commit 0083b8e6f11d7662283a267d4ce7c966812ffd8a)","affected":[{"ranges":[{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"0845233388f8a26d00acf9bf230cfd4f36aa4c30"},{"fixed":"9d3de463e23bfb1ff1567a32b099b1b3e5286a48"}]},{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"0845233388f8a26d00acf9bf230cfd4f36aa4c30"},{"fixed":"9bd7ff293fc84792514aeafa06c5a17f05cb5f4b"}]}],"versions":["v6.10","v6.10-rc1","v6.10-rc2","v6.10-rc3","v6.10-rc4","v6.10-rc5","v6.10-rc6","v6.10-rc7","v6.10.1","v6.10.10","v6.10.2","v6.10.3","v6.10.4","v6.10.5","v6.10.6","v6.10.7","v6.10.8","v6.10.9","v6.11-rc1","v6.11-rc2","v6.11-rc3","v6.11-rc4","v6.11-rc5","v6.11-rc6","v6.11-rc7","v6.7","v6.7-rc4","v6.7-rc5","v6.7-rc6","v6.7-rc7","v6.7-rc8","v6.8","v6.8-rc1","v6.8-rc2","v6.8-rc3","v6.8-rc4","v6.8-rc5","v6.8-rc6","v6.8-rc7","v6.9","v6.9-rc1","v6.9-rc2","v6.9-rc3","v6.9-rc4","v6.9-rc5","v6.9-rc6","v6.9-rc7"],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2024-46867.json","vanir_signatures":[{"deprecated":false,"digest":{"function_hash":"285724080183211252037585187350474711122","length":1048},"id":"CVE-2024-46867-228a3eb3","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@9d3de463e23bfb1ff1567a32b099b1b3e5286a48","target":{"file":"drivers/gpu/drm/xe/xe_drm_client.c","function":"show_meminfo"}},{"deprecated":false,"digest":{"function_hash":"285724080183211252037585187350474711122","length":1048},"id":"CVE-2024-46867-a56a2b18","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@9bd7ff293fc84792514aeafa06c5a17f05cb5f4b","target":{"file":"drivers/gpu/drm/xe/xe_drm_client.c","function":"show_meminfo"}},{"deprecated":false,"digest":{"line_hashes":["178536728141646503702646220876438190262","46611890902385581218335325514246094254","148527284848478413424169148833909140686","57131706899522370446645547147715646760","77464278630537200755323457383133734550","177957815691863093930494033400447440899","28725865122071896003597965026594452182","5201634936479033844987068549318676349","72863073014516130235276624141623973211","89957613843583628818499579717111184997","79900816816438247948204933074770105390","256702224180637973049343271025201754387"],"threshold":0.9},"id":"CVE-2024-46867-da9eba9e","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@9d3de463e23bfb1ff1567a32b099b1b3e5286a48","target":{"file":"drivers/gpu/drm/xe/xe_drm_client.c"}},{"deprecated":false,"digest":{"line_hashes":["178536728141646503702646220876438190262","46611890902385581218335325514246094254","148527284848478413424169148833909140686","57131706899522370446645547147715646760","77464278630537200755323457383133734550","177957815691863093930494033400447440899","28725865122071896003597965026594452182","5201634936479033844987068549318676349","72863073014516130235276624141623973211","89957613843583628818499579717111184997","79900816816438247948204933074770105390","256702224180637973049343271025201754387"],"threshold":0.9},"id":"CVE-2024-46867-eff9a436","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@9bd7ff293fc84792514aeafa06c5a17f05cb5f4b","target":{"file":"drivers/gpu/drm/xe/xe_drm_client.c"}}]}},{"package":{"name":"Kernel","ecosystem":"Linux"},"ranges":[{"type":"ECOSYSTEM","events":[{"introduced":"6.8.0"},{"fixed":"6.10.11"}]}],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2024-46867.json"}}],"references":[{"type":"PACKAGE","url":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git"},{"type":"WEB","url":"https://git.kernel.org/stable/c/9bd7ff293fc84792514aeafa06c5a17f05cb5f4b"},{"type":"WEB","url":"https://git.kernel.org/stable/c/9d3de463e23bfb1ff1567a32b099b1b3e5286a48"}]}