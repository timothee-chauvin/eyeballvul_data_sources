{"schema_version":"1.7.3","id":"CVE-2024-27023","published":"2024-05-01T12:49:21.063Z","modified":"2025-11-20T04:14:55.387968Z","summary":"md: Fix missing release of 'active_io' for flush","details":"In the Linux kernel, the following vulnerability has been resolved:\n\nmd: Fix missing release of 'active_io' for flush\n\nsubmit_flushes\n atomic_set(&mddev->flush_pending, 1);\n rdev_for_each_rcu(rdev, mddev)\n  atomic_inc(&mddev->flush_pending);\n  bi->bi_end_io = md_end_flush\n  submit_bio(bi);\n                        /* flush io is done first */\n                        md_end_flush\n                         if (atomic_dec_and_test(&mddev->flush_pending))\n                          percpu_ref_put(&mddev->active_io)\n                          -> active_io is not released\n\n if (atomic_dec_and_test(&mddev->flush_pending))\n  -> missing release of active_io\n\nFor consequence, mddev_suspend() will wait for 'active_io' to be zero\nforever.\n\nFix this problem by releasing 'active_io' in submit_flushes() if\n'flush_pending' is decreased to zero.","affected":[{"ranges":[{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"f9f2d957a8ea93c73182aebf7de30935a58c027d"},{"fixed":"6b2ff10390b19a2364af622b6666b690443f9f3f"}]},{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"530cec617f5a8ba6f26bcbf0d64d75c951d17730"},{"fixed":"02dad157ba11064d073f5499dc33552b227d5d3a"}]},{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"c4c2345214b66e2505a26fd2ea58839dd7a1d48d"},{"fixed":"11f81438927f84edfaaeb5d5f10856c3a1c1fc82"}]},{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"fa2bbff7b0b4e211fec5e5686ef96350690597b5"},{"fixed":"855678ed8534518e2b428bcbcec695de9ba248e8"}]}],"versions":["v6.1.75","v6.1.76","v6.1.77","v6.1.78","v6.1.79","v6.6.14","v6.6.15","v6.6.16","v6.6.17","v6.6.18","v6.7","v6.7-rc4","v6.7-rc5","v6.7-rc6","v6.7-rc7","v6.7-rc8","v6.7.2","v6.7.3","v6.7.4","v6.7.5","v6.7.6","v6.8-rc1"],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2024-27023.json","vanir_signatures":[{"deprecated":false,"digest":{"line_hashes":["44606919034761990457927544583031070689","115396081585269589644595353985063688577","294039982810670788420433012617993611282","15923521732393378834701026608222779599","110359776292670056942190127525199154731"],"threshold":0.9},"id":"CVE-2024-27023-5f0c7914","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@11f81438927f84edfaaeb5d5f10856c3a1c1fc82","target":{"file":"drivers/md/md.c"}},{"deprecated":false,"digest":{"line_hashes":["44606919034761990457927544583031070689","115396081585269589644595353985063688577","294039982810670788420433012617993611282","15923521732393378834701026608222779599","110359776292670056942190127525199154731"],"threshold":0.9},"id":"CVE-2024-27023-641aec75","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@02dad157ba11064d073f5499dc33552b227d5d3a","target":{"file":"drivers/md/md.c"}},{"deprecated":false,"digest":{"function_hash":"185414758039856867247992610183758087112","length":801},"id":"CVE-2024-27023-74659141","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@02dad157ba11064d073f5499dc33552b227d5d3a","target":{"file":"drivers/md/md.c","function":"submit_flushes"}},{"deprecated":false,"digest":{"line_hashes":["44606919034761990457927544583031070689","115396081585269589644595353985063688577","294039982810670788420433012617993611282","15923521732393378834701026608222779599","110359776292670056942190127525199154731"],"threshold":0.9},"id":"CVE-2024-27023-7541b07e","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@855678ed8534518e2b428bcbcec695de9ba248e8","target":{"file":"drivers/md/md.c"}},{"deprecated":false,"digest":{"function_hash":"185414758039856867247992610183758087112","length":801},"id":"CVE-2024-27023-a43f8462","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@11f81438927f84edfaaeb5d5f10856c3a1c1fc82","target":{"file":"drivers/md/md.c","function":"submit_flushes"}},{"deprecated":false,"digest":{"function_hash":"185414758039856867247992610183758087112","length":801},"id":"CVE-2024-27023-cdfeceee","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@855678ed8534518e2b428bcbcec695de9ba248e8","target":{"file":"drivers/md/md.c","function":"submit_flushes"}}]}},{"package":{"name":"Kernel","ecosystem":"Linux"},"ranges":[{"type":"ECOSYSTEM","events":[{"introduced":"6.1.75"},{"fixed":"6.1.80"}]},{"type":"ECOSYSTEM","events":[{"introduced":"6.6.14"},{"fixed":"6.6.19"}]},{"type":"ECOSYSTEM","events":[{"introduced":"6.7.2"},{"fixed":"6.7.7"}]}],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2024-27023.json"}}],"references":[{"type":"PACKAGE","url":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git"},{"type":"WEB","url":"https://git.kernel.org/stable/c/02dad157ba11064d073f5499dc33552b227d5d3a"},{"type":"WEB","url":"https://git.kernel.org/stable/c/11f81438927f84edfaaeb5d5f10856c3a1c1fc82"},{"type":"WEB","url":"https://git.kernel.org/stable/c/6b2ff10390b19a2364af622b6666b690443f9f3f"},{"type":"WEB","url":"https://git.kernel.org/stable/c/855678ed8534518e2b428bcbcec695de9ba248e8"}]}