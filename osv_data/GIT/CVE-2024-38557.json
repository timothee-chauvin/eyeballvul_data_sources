{
  "affected": [
    {
      "database_specific": {
        "source": "https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2024-38557.json",
        "vanir_signatures": [
          {
            "deprecated": false,
            "digest": {
              "line_hashes": [
                "272781039579608154505080512541497474347",
                "79742332365434317311598009125930684738",
                "53224885553265709458041273978542094856",
                "43502989886347905124732599316166439783",
                "164543511010890738492194921786127348845",
                "306491134163901517384363475238123353134",
                "210930131384991916046980576595764564905",
                "337782068926040374124415224385615985255",
                "168369776713330127237280009980195911879",
                "187794381750235887089826527239794256464",
                "126584419111407528717353836707570279917",
                "71485950389683664440618591192361715515"
              ],
              "threshold": 0.9
            },
            "id": "CVE-2024-38557-0117e4eb",
            "signature_type": "Line",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0f320f28f54b1b269a755be2e3fb3695e0b80b07",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/lag/lag.c"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "line_hashes": [
                "300630128967244417754267095840263087737",
                "43202588292131987816156126490636512066",
                "31601513728143706375094026370084247715",
                "226736540603273034602037769800267331032",
                "254573577839646215803730989404242566244",
                "105828899567197576234958076337108623598",
                "220165475118099997299463153885731312479",
                "286535311023046816374706047612078372275"
              ],
              "threshold": 0.9
            },
            "id": "CVE-2024-38557-07a45aee",
            "signature_type": "Line",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0f320f28f54b1b269a755be2e3fb3695e0b80b07",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/eswitch.h"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "function_hash": "217088060419701338821890932302577047654",
              "length": 519.0
            },
            "id": "CVE-2024-38557-16aacef4",
            "signature_type": "Function",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@f03c714a0fdd1f93101a929d0e727c28a66383fc",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c",
              "function": "mlx5_eswitch_reload_reps"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "line_hashes": [
                "164543511010890738492194921786127348845",
                "306491134163901517384363475238123353134",
                "153638385015560850057875313314537054305",
                "269763500706448067067315289755070583059",
                "116057431770356665038486227956016398991",
                "248896987001942972586320430674182224162",
                "203815534723718644201745239004541631233",
                "69658085899331081283917996567849616558"
              ],
              "threshold": 0.9
            },
            "id": "CVE-2024-38557-3b7488c6",
            "signature_type": "Line",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0f320f28f54b1b269a755be2e3fb3695e0b80b07",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/lag/mpesw.c"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "line_hashes": [
                "333444359792140948356839848752672615988",
                "149269454041872109718119071262607367581",
                "13321350160545233466961267306892453861",
                "94911525711034376352816907333489814141",
                "305364556428072186645335821119767423854",
                "152111608036970141623115643710264543408",
                "278021925768702802294169411640257479557",
                "146098180775032312451664985721319279211",
                "279451708979819755415756540799812517395",
                "274655388986581196204102457119085872261",
                "180395098569090727402299557806070379778",
                "338617698860512899142457529592965714084",
                "20781136438545995312727977487847971968",
                "203705973158445341470235371445302512596",
                "251681459196389762136418918499874017525",
                "44277268056190357708618502481585681632",
                "28188209674475084706215305991205902840",
                "187979177886742219645899546348719057679",
                "116291378821973354109370817030710316288",
                "325793729423182585797409528272966728231",
                "270841966564195153961295177067099732585",
                "132416930769326051911431793475612382659",
                "330820575152631432456995642185091112898",
                "14038655007930418060517510406196496251",
                "119988236116806117888768923617564234757",
                "91587872519585787642406489847147807622"
              ],
              "threshold": 0.9
            },
            "id": "CVE-2024-38557-4206b84a",
            "signature_type": "Line",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@e93fc8d959e56092e2eca1e5511c2d2f0ad6807a",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "function_hash": "23720350968403300234118525391417513295",
              "length": 554.0
            },
            "id": "CVE-2024-38557-50d6aed5",
            "signature_type": "Function",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@e93fc8d959e56092e2eca1e5511c2d2f0ad6807a",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c",
              "function": "mlx5_esw_offloads_rep_load"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "line_hashes": [
                "300630128967244417754267095840263087737",
                "43202588292131987816156126490636512066",
                "31601513728143706375094026370084247715",
                "226736540603273034602037769800267331032",
                "254573577839646215803730989404242566244",
                "105828899567197576234958076337108623598",
                "220165475118099997299463153885731312479",
                "286535311023046816374706047612078372275"
              ],
              "threshold": 0.9
            },
            "id": "CVE-2024-38557-5617cbbf",
            "signature_type": "Line",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@f03c714a0fdd1f93101a929d0e727c28a66383fc",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/eswitch.h"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "line_hashes": [
                "333444359792140948356839848752672615988",
                "149269454041872109718119071262607367581",
                "13321350160545233466961267306892453861",
                "94911525711034376352816907333489814141",
                "305364556428072186645335821119767423854",
                "152111608036970141623115643710264543408",
                "278021925768702802294169411640257479557",
                "146098180775032312451664985721319279211",
                "279451708979819755415756540799812517395",
                "274655388986581196204102457119085872261",
                "180395098569090727402299557806070379778",
                "338617698860512899142457529592965714084",
                "20781136438545995312727977487847971968",
                "203705973158445341470235371445302512596",
                "251681459196389762136418918499874017525",
                "44277268056190357708618502481585681632",
                "28188209674475084706215305991205902840",
                "187979177886742219645899546348719057679",
                "116291378821973354109370817030710316288",
                "325793729423182585797409528272966728231",
                "270841966564195153961295177067099732585",
                "132416930769326051911431793475612382659",
                "330820575152631432456995642185091112898",
                "14038655007930418060517510406196496251",
                "119988236116806117888768923617564234757",
                "91587872519585787642406489847147807622"
              ],
              "threshold": 0.9
            },
            "id": "CVE-2024-38557-5a518b5f",
            "signature_type": "Line",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0f320f28f54b1b269a755be2e3fb3695e0b80b07",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "line_hashes": [
                "272781039579608154505080512541497474347",
                "79742332365434317311598009125930684738",
                "53224885553265709458041273978542094856",
                "43502989886347905124732599316166439783",
                "164543511010890738492194921786127348845",
                "306491134163901517384363475238123353134",
                "210930131384991916046980576595764564905",
                "337782068926040374124415224385615985255",
                "168369776713330127237280009980195911879",
                "187794381750235887089826527239794256464",
                "126584419111407528717353836707570279917",
                "71485950389683664440618591192361715515"
              ],
              "threshold": 0.9
            },
            "id": "CVE-2024-38557-61c4db92",
            "signature_type": "Line",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@e93fc8d959e56092e2eca1e5511c2d2f0ad6807a",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/lag/lag.c"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "function_hash": "23720350968403300234118525391417513295",
              "length": 554.0
            },
            "id": "CVE-2024-38557-78cae2ce",
            "signature_type": "Function",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@f03c714a0fdd1f93101a929d0e727c28a66383fc",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c",
              "function": "mlx5_esw_offloads_rep_load"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "function_hash": "23720350968403300234118525391417513295",
              "length": 554.0
            },
            "id": "CVE-2024-38557-7b9c784f",
            "signature_type": "Function",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0f320f28f54b1b269a755be2e3fb3695e0b80b07",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c",
              "function": "mlx5_esw_offloads_rep_load"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "line_hashes": [
                "300630128967244417754267095840263087737",
                "43202588292131987816156126490636512066",
                "31601513728143706375094026370084247715",
                "226736540603273034602037769800267331032",
                "254573577839646215803730989404242566244",
                "105828899567197576234958076337108623598",
                "220165475118099997299463153885731312479",
                "286535311023046816374706047612078372275"
              ],
              "threshold": 0.9
            },
            "id": "CVE-2024-38557-8c2eca0f",
            "signature_type": "Line",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@e93fc8d959e56092e2eca1e5511c2d2f0ad6807a",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/eswitch.h"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "function_hash": "217088060419701338821890932302577047654",
              "length": 519.0
            },
            "id": "CVE-2024-38557-8e572e26",
            "signature_type": "Function",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0f320f28f54b1b269a755be2e3fb3695e0b80b07",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c",
              "function": "mlx5_eswitch_reload_reps"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "line_hashes": [
                "164543511010890738492194921786127348845",
                "306491134163901517384363475238123353134",
                "153638385015560850057875313314537054305",
                "269763500706448067067315289755070583059",
                "116057431770356665038486227956016398991",
                "248896987001942972586320430674182224162",
                "203815534723718644201745239004541631233",
                "69658085899331081283917996567849616558"
              ],
              "threshold": 0.9
            },
            "id": "CVE-2024-38557-aa9dd4e9",
            "signature_type": "Line",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@f03c714a0fdd1f93101a929d0e727c28a66383fc",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/lag/mpesw.c"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "line_hashes": [
                "333444359792140948356839848752672615988",
                "149269454041872109718119071262607367581",
                "13321350160545233466961267306892453861",
                "94911525711034376352816907333489814141",
                "305364556428072186645335821119767423854",
                "152111608036970141623115643710264543408",
                "278021925768702802294169411640257479557",
                "146098180775032312451664985721319279211",
                "279451708979819755415756540799812517395",
                "274655388986581196204102457119085872261",
                "180395098569090727402299557806070379778",
                "338617698860512899142457529592965714084",
                "20781136438545995312727977487847971968",
                "203705973158445341470235371445302512596",
                "251681459196389762136418918499874017525",
                "44277268056190357708618502481585681632",
                "28188209674475084706215305991205902840",
                "187979177886742219645899546348719057679",
                "116291378821973354109370817030710316288",
                "325793729423182585797409528272966728231",
                "270841966564195153961295177067099732585",
                "132416930769326051911431793475612382659",
                "330820575152631432456995642185091112898",
                "14038655007930418060517510406196496251",
                "119988236116806117888768923617564234757",
                "91587872519585787642406489847147807622"
              ],
              "threshold": 0.9
            },
            "id": "CVE-2024-38557-b3759b1f",
            "signature_type": "Line",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@f03c714a0fdd1f93101a929d0e727c28a66383fc",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "line_hashes": [
                "272781039579608154505080512541497474347",
                "79742332365434317311598009125930684738",
                "53224885553265709458041273978542094856",
                "43502989886347905124732599316166439783",
                "164543511010890738492194921786127348845",
                "306491134163901517384363475238123353134",
                "210930131384991916046980576595764564905",
                "337782068926040374124415224385615985255",
                "168369776713330127237280009980195911879",
                "187794381750235887089826527239794256464",
                "126584419111407528717353836707570279917",
                "71485950389683664440618591192361715515"
              ],
              "threshold": 0.9
            },
            "id": "CVE-2024-38557-cb3d1d47",
            "signature_type": "Line",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@f03c714a0fdd1f93101a929d0e727c28a66383fc",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/lag/lag.c"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "line_hashes": [
                "164543511010890738492194921786127348845",
                "306491134163901517384363475238123353134",
                "153638385015560850057875313314537054305",
                "269763500706448067067315289755070583059",
                "116057431770356665038486227956016398991",
                "248896987001942972586320430674182224162",
                "203815534723718644201745239004541631233",
                "69658085899331081283917996567849616558"
              ],
              "threshold": 0.9
            },
            "id": "CVE-2024-38557-e1728c39",
            "signature_type": "Line",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@e93fc8d959e56092e2eca1e5511c2d2f0ad6807a",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/lag/mpesw.c"
            }
          },
          {
            "deprecated": false,
            "digest": {
              "function_hash": "217088060419701338821890932302577047654",
              "length": 519.0
            },
            "id": "CVE-2024-38557-fcf26402",
            "signature_type": "Function",
            "signature_version": "v1",
            "source": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@e93fc8d959e56092e2eca1e5511c2d2f0ad6807a",
            "target": {
              "file": "drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c",
              "function": "mlx5_eswitch_reload_reps"
            }
          }
        ]
      },
      "ranges": [
        {
          "events": [
            {
              "introduced": "598fe77df855feeeca9dfda2ffe622ac7724e5c3"
            },
            {
              "fixed": "e93fc8d959e56092e2eca1e5511c2d2f0ad6807a"
            }
          ],
          "repo": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git",
          "type": "GIT"
        },
        {
          "events": [
            {
              "introduced": "598fe77df855feeeca9dfda2ffe622ac7724e5c3"
            },
            {
              "fixed": "f03c714a0fdd1f93101a929d0e727c28a66383fc"
            }
          ],
          "repo": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git",
          "type": "GIT"
        },
        {
          "events": [
            {
              "introduced": "598fe77df855feeeca9dfda2ffe622ac7724e5c3"
            },
            {
              "fixed": "0f320f28f54b1b269a755be2e3fb3695e0b80b07"
            }
          ],
          "repo": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git",
          "type": "GIT"
        },
        {
          "events": [
            {
              "introduced": "598fe77df855feeeca9dfda2ffe622ac7724e5c3"
            },
            {
              "fixed": "0f06228d4a2dcc1fca5b3ddb0eefa09c05b102c4"
            }
          ],
          "repo": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git",
          "type": "GIT"
        }
      ],
      "versions": [
        "v5.14",
        "v5.14-rc2",
        "v5.14-rc3",
        "v5.14-rc4",
        "v5.14-rc5",
        "v5.14-rc6",
        "v5.14-rc7",
        "v5.15",
        "v5.15-rc1",
        "v5.15-rc2",
        "v5.15-rc3",
        "v5.15-rc4",
        "v5.15-rc5",
        "v5.15-rc6",
        "v5.15-rc7",
        "v5.16",
        "v5.16-rc1",
        "v5.16-rc2",
        "v5.16-rc3",
        "v5.16-rc4",
        "v5.16-rc5",
        "v5.16-rc6",
        "v5.16-rc7",
        "v5.16-rc8",
        "v5.17",
        "v5.17-rc1",
        "v5.17-rc2",
        "v5.17-rc3",
        "v5.17-rc4",
        "v5.17-rc5",
        "v5.17-rc6",
        "v5.17-rc7",
        "v5.17-rc8",
        "v5.18",
        "v5.18-rc1",
        "v5.18-rc2",
        "v5.18-rc3",
        "v5.18-rc4",
        "v5.18-rc5",
        "v5.18-rc6",
        "v5.18-rc7",
        "v5.19",
        "v5.19-rc1",
        "v5.19-rc2",
        "v5.19-rc3",
        "v5.19-rc4",
        "v5.19-rc5",
        "v5.19-rc6",
        "v5.19-rc7",
        "v5.19-rc8",
        "v6.0",
        "v6.0-rc1",
        "v6.0-rc2",
        "v6.0-rc3",
        "v6.0-rc4",
        "v6.0-rc5",
        "v6.0-rc6",
        "v6.0-rc7",
        "v6.1",
        "v6.1-rc1",
        "v6.1-rc2",
        "v6.1-rc3",
        "v6.1-rc4",
        "v6.1-rc5",
        "v6.1-rc6",
        "v6.1-rc7",
        "v6.1-rc8",
        "v6.2",
        "v6.2-rc1",
        "v6.2-rc2",
        "v6.2-rc3",
        "v6.2-rc4",
        "v6.2-rc5",
        "v6.2-rc6",
        "v6.2-rc7",
        "v6.2-rc8",
        "v6.3",
        "v6.3-rc1",
        "v6.3-rc2",
        "v6.3-rc3",
        "v6.3-rc4",
        "v6.3-rc5",
        "v6.3-rc6",
        "v6.3-rc7",
        "v6.4",
        "v6.4-rc1",
        "v6.4-rc2",
        "v6.4-rc3",
        "v6.4-rc4",
        "v6.4-rc5",
        "v6.4-rc6",
        "v6.4-rc7",
        "v6.5",
        "v6.5-rc1",
        "v6.5-rc2",
        "v6.5-rc3",
        "v6.5-rc4",
        "v6.5-rc5",
        "v6.5-rc6",
        "v6.5-rc7",
        "v6.6",
        "v6.6-rc1",
        "v6.6-rc2",
        "v6.6-rc3",
        "v6.6-rc4",
        "v6.6-rc5",
        "v6.6-rc6",
        "v6.6-rc7",
        "v6.6.1",
        "v6.6.10",
        "v6.6.11",
        "v6.6.12",
        "v6.6.13",
        "v6.6.14",
        "v6.6.15",
        "v6.6.16",
        "v6.6.17",
        "v6.6.18",
        "v6.6.19",
        "v6.6.2",
        "v6.6.20",
        "v6.6.21",
        "v6.6.22",
        "v6.6.23",
        "v6.6.24",
        "v6.6.25",
        "v6.6.26",
        "v6.6.27",
        "v6.6.28",
        "v6.6.29",
        "v6.6.3",
        "v6.6.30",
        "v6.6.31",
        "v6.6.32",
        "v6.6.4",
        "v6.6.5",
        "v6.6.6",
        "v6.6.7",
        "v6.6.8",
        "v6.6.9",
        "v6.7",
        "v6.7-rc1",
        "v6.7-rc2",
        "v6.7-rc3",
        "v6.7-rc4",
        "v6.7-rc5",
        "v6.7-rc6",
        "v6.7-rc7",
        "v6.7-rc8",
        "v6.8",
        "v6.8-rc1",
        "v6.8-rc2",
        "v6.8-rc3",
        "v6.8-rc4",
        "v6.8-rc5",
        "v6.8-rc6",
        "v6.8-rc7",
        "v6.8.1",
        "v6.8.10",
        "v6.8.11",
        "v6.8.2",
        "v6.8.3",
        "v6.8.4",
        "v6.8.5",
        "v6.8.6",
        "v6.8.7",
        "v6.8.8",
        "v6.8.9",
        "v6.9",
        "v6.9-rc1",
        "v6.9-rc2",
        "v6.9-rc3",
        "v6.9-rc4",
        "v6.9-rc5",
        "v6.9-rc6",
        "v6.9-rc7",
        "v6.9.1",
        "v6.9.2"
      ]
    },
    {
      "database_specific": {
        "source": "https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2024-38557.json"
      },
      "package": {
        "ecosystem": "Linux",
        "name": "Kernel"
      },
      "ranges": [
        {
          "events": [
            {
              "introduced": "5.15.0"
            },
            {
              "fixed": "6.6.33"
            }
          ],
          "type": "ECOSYSTEM"
        },
        {
          "events": [
            {
              "introduced": "6.7.0"
            },
            {
              "fixed": "6.8.12"
            }
          ],
          "type": "ECOSYSTEM"
        },
        {
          "events": [
            {
              "introduced": "6.9.0"
            },
            {
              "fixed": "6.9.3"
            }
          ],
          "type": "ECOSYSTEM"
        }
      ],
      "versions": []
    }
  ],
  "details": "In the Linux kernel, the following vulnerability has been resolved:\n\nnet/mlx5: Reload only IB representors upon lag disable/enable\n\nOn lag disable, the bond IB device along with all of its\nrepresentors are destroyed, and then the slaves' representors get reloaded.\n\nIn case the slave IB representor load fails, the eswitch error flow\nunloads all representors, including ethernet representors, where the\nnetdevs get detached and removed from lag bond. Such flow is inaccurate\nas the lag driver is not responsible for loading/unloading ethernet\nrepresentors. Furthermore, the flow described above begins by holding\nlag lock to prevent bond changes during disable flow. However, when\nreaching the ethernet representors detachment from lag, the lag lock is\nrequired again, triggering the following deadlock:\n\nCall trace:\n__switch_to+0xf4/0x148\n__schedule+0x2c8/0x7d0\nschedule+0x50/0xe0\nschedule_preempt_disabled+0x18/0x28\n__mutex_lock.isra.13+0x2b8/0x570\n__mutex_lock_slowpath+0x1c/0x28\nmutex_lock+0x4c/0x68\nmlx5_lag_remove_netdev+0x3c/0x1a0 [mlx5_core]\nmlx5e_uplink_rep_disable+0x70/0xa0 [mlx5_core]\nmlx5e_detach_netdev+0x6c/0xb0 [mlx5_core]\nmlx5e_netdev_change_profile+0x44/0x138 [mlx5_core]\nmlx5e_netdev_attach_nic_profile+0x28/0x38 [mlx5_core]\nmlx5e_vport_rep_unload+0x184/0x1b8 [mlx5_core]\nmlx5_esw_offloads_rep_load+0xd8/0xe0 [mlx5_core]\nmlx5_eswitch_reload_reps+0x74/0xd0 [mlx5_core]\nmlx5_disable_lag+0x130/0x138 [mlx5_core]\nmlx5_lag_disable_change+0x6c/0x70 [mlx5_core] // hold ldev->lock\nmlx5_devlink_eswitch_mode_set+0xc0/0x410 [mlx5_core]\ndevlink_nl_cmd_eswitch_set_doit+0xdc/0x180\ngenl_family_rcv_msg_doit.isra.17+0xe8/0x138\ngenl_rcv_msg+0xe4/0x220\nnetlink_rcv_skb+0x44/0x108\ngenl_rcv+0x40/0x58\nnetlink_unicast+0x198/0x268\nnetlink_sendmsg+0x1d4/0x418\nsock_sendmsg+0x54/0x60\n__sys_sendto+0xf4/0x120\n__arm64_sys_sendto+0x30/0x40\nel0_svc_common+0x8c/0x120\ndo_el0_svc+0x30/0xa0\nel0_svc+0x20/0x30\nel0_sync_handler+0x90/0xb8\nel0_sync+0x160/0x180\n\nThus, upon lag enable/disable, load and unload only the IB representors\nof the slaves preventing the deadlock mentioned above.\n\nWhile at it, refactor the mlx5_esw_offloads_rep_load() function to have\na static helper method for its internal logic, in symmetry with the\nrepresentor unload design.",
  "id": "CVE-2024-38557",
  "modified": "2025-10-15T12:22:06.333987Z",
  "published": "2024-06-19T13:35:27Z",
  "references": [
    {
      "type": "PACKAGE",
      "url": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git"
    },
    {
      "type": "WEB",
      "url": "https://git.kernel.org/stable/c/0f06228d4a2dcc1fca5b3ddb0eefa09c05b102c4"
    },
    {
      "type": "WEB",
      "url": "https://git.kernel.org/stable/c/0f320f28f54b1b269a755be2e3fb3695e0b80b07"
    },
    {
      "type": "WEB",
      "url": "https://git.kernel.org/stable/c/e93fc8d959e56092e2eca1e5511c2d2f0ad6807a"
    },
    {
      "type": "WEB",
      "url": "https://git.kernel.org/stable/c/f03c714a0fdd1f93101a929d0e727c28a66383fc"
    }
  ],
  "related": [
    "MGASA-2024-0263",
    "MGASA-2024-0266",
    "SUSE-SU-2024:2372-1",
    "SUSE-SU-2024:2394-1",
    "SUSE-SU-2024:2571-1",
    "SUSE-SU-2024:2896-1",
    "SUSE-SU-2024:2939-1",
    "SUSE-SU-2024:2973-1"
  ],
  "schema_version": "1.7.3",
  "summary": "net/mlx5: Reload only IB representors upon lag disable/enable"
}