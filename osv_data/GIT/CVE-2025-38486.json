{"schema_version":"1.7.3","id":"CVE-2025-38486","published":"2025-07-28T11:21:50.349Z","modified":"2025-11-20T09:20:54.591962Z","summary":"soundwire: Revert \"soundwire: qcom: Add set_channel_map api support\"","details":"In the Linux kernel, the following vulnerability has been resolved:\n\nsoundwire: Revert \"soundwire: qcom: Add set_channel_map api support\"\n\nThis reverts commit 7796c97df6b1b2206681a07f3c80f6023a6593d5.\n\nThis patch broke Dragonboard 845c (sdm845). I see:\n\n    Unexpected kernel BRK exception at EL1\n    Internal error: BRK handler: 00000000f20003e8 [#1]  SMP\n    pc : qcom_swrm_set_channel_map+0x7c/0x80 [soundwire_qcom]\n    lr : snd_soc_dai_set_channel_map+0x34/0x78\n    Call trace:\n     qcom_swrm_set_channel_map+0x7c/0x80 [soundwire_qcom] (P)\n     sdm845_dai_init+0x18c/0x2e0 [snd_soc_sdm845]\n     snd_soc_link_init+0x28/0x6c\n     snd_soc_bind_card+0x5f4/0xb0c\n     snd_soc_register_card+0x148/0x1a4\n     devm_snd_soc_register_card+0x50/0xb0\n     sdm845_snd_platform_probe+0x124/0x148 [snd_soc_sdm845]\n     platform_probe+0x6c/0xd0\n     really_probe+0xc0/0x2a4\n     __driver_probe_device+0x7c/0x130\n     driver_probe_device+0x40/0x118\n     __device_attach_driver+0xc4/0x108\n     bus_for_each_drv+0x8c/0xf0\n     __device_attach+0xa4/0x198\n     device_initial_probe+0x18/0x28\n     bus_probe_device+0xb8/0xbc\n     deferred_probe_work_func+0xac/0xfc\n     process_one_work+0x244/0x658\n     worker_thread+0x1b4/0x360\n     kthread+0x148/0x228\n     ret_from_fork+0x10/0x20\n    Kernel panic - not syncing: BRK handler: Fatal exception\n\nDan has also reported following issues with the original patch\nhttps://lore.kernel.org/all/33fe8fe7-719a-405a-9ed2-d9f816ce1d57@sabinyo.mountain/\n\nBug #1:\nThe zeroeth element of ctrl->pconfig[] is supposed to be unused.  We\nstart counting at 1.  However this code sets ctrl->pconfig[0].ch_mask = 128.\n\nBug #2:\nThere are SLIM_MAX_TX_PORTS (16) elements in tx_ch[] array but only\nQCOM_SDW_MAX_PORTS + 1 (15) in the ctrl->pconfig[] array so it corrupts\nmemory like Yongqin Liu pointed out.\n\nBug 3:\nLike Jie Gan pointed out, it erases all the tx information with the rx\ninformation.","affected":[{"ranges":[{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"7796c97df6b1b2206681a07f3c80f6023a6593d5"},{"fixed":"207cea8b72fcbdf4e6db178e54186ed4f1514b3c"}]},{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"7796c97df6b1b2206681a07f3c80f6023a6593d5"},{"fixed":"834bce6a715ae9a9c4dce7892454a19adf22b013"}]}],"versions":["v6.14","v6.14-rc2","v6.14-rc3","v6.14-rc4","v6.14-rc5","v6.14-rc6","v6.14-rc7","v6.15","v6.15-rc1","v6.15-rc2","v6.15-rc3","v6.15-rc4","v6.15-rc5","v6.15-rc6","v6.15-rc7","v6.15.1","v6.15.2","v6.15.3","v6.15.4","v6.15.5","v6.15.6","v6.15.7","v6.16-rc1"],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2025-38486.json","vanir_signatures":[{"deprecated":false,"digest":{"function_hash":"60823219312424730280963839032417012715","length":577},"id":"CVE-2025-38486-53f256c5","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@834bce6a715ae9a9c4dce7892454a19adf22b013","target":{"file":"drivers/soundwire/qcom.c","function":"qcom_swrm_port_enable"}},{"deprecated":false,"digest":{"line_hashes":["291757561568651976588289082642415726790","39254918712934741669165463595433462929","158132649452125171769954260554814397355","49276000697392893306275137604234925132","86395676550819181203272055351625041433","211485744892555474155796410011807201975","135085974666150036688989142998534722853","151806243765689924720507796544334387566","72450995988980520982970547767604366707","293220319144345546644151768968875084659","219773293571503549061849454599998639245","251384055602030159872968535649496986614","286396504857737533331432862236376305654","215558835695495556427816367855948039756","9854495328532274121358080696677871290","190631221994895588330651943197595188533","235362618940795878448703732621112706980","117500192747823015192785379289350334797","52538640775968020914705658826208491617","265431596350514143507778468831431774356","143177170743459573057751782264866370713","85052733458189148071091062548515499143","331521821146471625091315434191267328283","54887328100136013466565168497174078819","24342440546350325492903960783998543342","317216413997790291154970267086026690835","33864711625792050375120017991391616587","282520110825686284737692487573940879472","97471532681795590498878305441934194132","82787769771490447739804405263907771322","174510926505326716660200979969761971487","256668649935513654553335405559993070654","262336285718652947726051832480790016415","176168913643315020253782677939069989636","262648864964790914530099585752830650585","214146383072250170392227668552523350205"],"threshold":0.9},"id":"CVE-2025-38486-8ee0d4b9","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@834bce6a715ae9a9c4dce7892454a19adf22b013","target":{"file":"drivers/soundwire/qcom.c"}},{"deprecated":false,"digest":{"function_hash":"191801861495081627000761213258085294256","length":430},"id":"CVE-2025-38486-ff392eef","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@834bce6a715ae9a9c4dce7892454a19adf22b013","target":{"file":"drivers/soundwire/qcom.c","function":"qcom_swrm_set_channel_map"}}]}},{"package":{"name":"Kernel","ecosystem":"Linux"},"ranges":[{"type":"ECOSYSTEM","events":[{"introduced":"6.15.0"},{"fixed":"6.15.8"}]}],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2025-38486.json"}}],"references":[{"type":"PACKAGE","url":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git"},{"type":"WEB","url":"https://git.kernel.org/stable/c/207cea8b72fcbdf4e6db178e54186ed4f1514b3c"},{"type":"WEB","url":"https://git.kernel.org/stable/c/834bce6a715ae9a9c4dce7892454a19adf22b013"}]}