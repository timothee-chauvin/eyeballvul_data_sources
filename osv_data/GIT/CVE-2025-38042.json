{"schema_version":"1.7.3","id":"CVE-2025-38042","published":"2025-06-18T09:33:27Z","modified":"2025-10-22T11:46:43.431628Z","summary":"dmaengine: ti: k3-udma-glue: Drop skip_fdq argument from k3_udma_glue_reset_rx_chn","details":"In the Linux kernel, the following vulnerability has been resolved:\n\ndmaengine: ti: k3-udma-glue: Drop skip_fdq argument from k3_udma_glue_reset_rx_chn\n\nThe user of k3_udma_glue_reset_rx_chn() e.g. ti_am65_cpsw_nuss can\nrun on multiple platforms having different DMA architectures.\nOn some platforms there can be one FDQ for all flows in the RX channel\nwhile for others there is a separate FDQ for each flow in the RX channel.\n\nSo far we have been relying on the skip_fdq argument of\nk3_udma_glue_reset_rx_chn().\n\nInstead of relying on the user to provide this information, infer it\nbased on DMA architecture during k3_udma_glue_request_rx_chn() and save it\nin an internal flag 'single_fdq'. Use that flag at\nk3_udma_glue_reset_rx_chn() to deicide if the FDQ needs\nto be cleared for every flow or just for flow 0.\n\nFixes the below issue on ti_am65_cpsw_nuss driver on AM62-SK.\n\n> ip link set eth1 down\n> ip link set eth0 down\n> ethtool -L eth0 rx 8\n> ip link set eth0 up\n> modprobe -r ti_am65_cpsw_nuss\n\n[  103.045726] ------------[ cut here ]------------\n[  103.050505] k3_knav_desc_pool size 512000 != avail 64000\n[  103.050703] WARNING: CPU: 1 PID: 450 at drivers/net/ethernet/ti/k3-cppi-desc-pool.c:33 k3_cppi_desc_pool_destroy+0xa0/0xa8 [k3_cppi_desc_pool]\n[  103.068810] Modules linked in: ti_am65_cpsw_nuss(-) k3_cppi_desc_pool snd_soc_hdmi_codec crct10dif_ce snd_soc_simple_card snd_soc_simple_card_utils display_connector rtc_ti_k3 k3_j72xx_bandgap tidss drm_client_lib snd_soc_davinci_mcas\np drm_dma_helper tps6598x phylink snd_soc_ti_udma rti_wdt drm_display_helper snd_soc_tlv320aic3x_i2c typec at24 phy_gmii_sel snd_soc_ti_edma snd_soc_tlv320aic3x sii902x snd_soc_ti_sdma sa2ul omap_mailbox drm_kms_helper authenc cfg80211 r\nfkill fuse drm drm_panel_orientation_quirks backlight ip_tables x_tables ipv6 [last unloaded: k3_cppi_desc_pool]\n[  103.119950] CPU: 1 UID: 0 PID: 450 Comm: modprobe Not tainted 6.13.0-rc7-00001-g9c5e3435fa66 #1011\n[  103.119968] Hardware name: Texas Instruments AM625 SK (DT)\n[  103.119974] pstate: 80000005 (Nzcv daif -PAN -UAO -TCO -DIT -SSBS BTYPE=--)\n[  103.119983] pc : k3_cppi_desc_pool_destroy+0xa0/0xa8 [k3_cppi_desc_pool]\n[  103.148007] lr : k3_cppi_desc_pool_destroy+0xa0/0xa8 [k3_cppi_desc_pool]\n[  103.154709] sp : ffff8000826ebbc0\n[  103.158015] x29: ffff8000826ebbc0 x28: ffff0000090b6300 x27: 0000000000000000\n[  103.165145] x26: 0000000000000000 x25: 0000000000000000 x24: ffff0000019df6b0\n[  103.172271] x23: ffff0000019df6b8 x22: ffff0000019df410 x21: ffff8000826ebc88\n[  103.179397] x20: 000000000007d000 x19: ffff00000a3b3000 x18: 0000000000000000\n[  103.186522] x17: 0000000000000000 x16: 0000000000000000 x15: 000001e8c35e1cde\n[  103.193647] x14: 0000000000000396 x13: 000000000000035c x12: 0000000000000000\n[  103.200772] x11: 000000000000003a x10: 00000000000009c0 x9 : ffff8000826eba20\n[  103.207897] x8 : ffff0000090b6d20 x7 : ffff00007728c180 x6 : ffff00007728c100\n[  103.215022] x5 : 0000000000000001 x4 : ffff000000508a50 x3 : ffff7ffff6146000\n[  103.222147] x2 : 0000000000000000 x1 : e300b4173ee6b200 x0 : 0000000000000000\n[  103.229274] Call trace:\n[  103.231714]  k3_cppi_desc_pool_destroy+0xa0/0xa8 [k3_cppi_desc_pool] (P)\n[  103.238408]  am65_cpsw_nuss_free_rx_chns+0x28/0x4c [ti_am65_cpsw_nuss]\n[  103.244942]  devm_action_release+0x14/0x20\n[  103.249040]  release_nodes+0x3c/0x68\n[  103.252610]  devres_release_all+0x8c/0xdc\n[  103.256614]  device_unbind_cleanup+0x18/0x60\n[  103.260876]  device_release_driver_internal+0xf8/0x178\n[  103.266004]  driver_detach+0x50/0x9c\n[  103.269571]  bus_remove_driver+0x6c/0xbc\n[  103.273485]  driver_unregister+0x30/0x60\n[  103.277401]  platform_driver_unregister+0x14/0x20\n[  103.282096]  am65_cpsw_nuss_driver_exit+0x18/0xff4 [ti_am65_cpsw_nuss]\n[  103.288620]  __arm64_sys_delete_module+0x17c/0x25c\n[  103.293404]  invoke_syscall+0x44/0x100\n[  103.297149]  el0_svc_common.constprop.0+0xc0/0xe0\n[  103.301845]  do_el0_svc+0x1c/0x28\n[  103.305155]  el0_svc+0x28/0x98\n---truncated---","affected":[{"ranges":[{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"d702419134133db1eab2067dc6ea5723467fd917"},{"fixed":"d0dd9d133ef8fdc894e0be9aa27dc49ef5f813cb"}]},{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"d702419134133db1eab2067dc6ea5723467fd917"},{"fixed":"0da30874729baeb01889b0eca16cfda122687503"}]}],"versions":["v5.10","v5.10-rc1","v5.10-rc2","v5.10-rc3","v5.10-rc4","v5.10-rc5","v5.10-rc6","v5.10-rc7","v5.11","v5.11-rc1","v5.11-rc2","v5.11-rc3","v5.11-rc4","v5.11-rc5","v5.11-rc6","v5.11-rc7","v5.12","v5.12-rc1","v5.12-rc1-dontuse","v5.12-rc2","v5.12-rc3","v5.12-rc4","v5.12-rc5","v5.12-rc6","v5.12-rc7","v5.12-rc8","v5.13","v5.13-rc1","v5.13-rc2","v5.13-rc3","v5.13-rc4","v5.13-rc5","v5.13-rc6","v5.13-rc7","v5.14","v5.14-rc1","v5.14-rc2","v5.14-rc3","v5.14-rc4","v5.14-rc5","v5.14-rc6","v5.14-rc7","v5.15","v5.15-rc1","v5.15-rc2","v5.15-rc3","v5.15-rc4","v5.15-rc5","v5.15-rc6","v5.15-rc7","v5.16","v5.16-rc1","v5.16-rc2","v5.16-rc3","v5.16-rc4","v5.16-rc5","v5.16-rc6","v5.16-rc7","v5.16-rc8","v5.17","v5.17-rc1","v5.17-rc2","v5.17-rc3","v5.17-rc4","v5.17-rc5","v5.17-rc6","v5.17-rc7","v5.17-rc8","v5.18","v5.18-rc1","v5.18-rc2","v5.18-rc3","v5.18-rc4","v5.18-rc5","v5.18-rc6","v5.18-rc7","v5.19","v5.19-rc1","v5.19-rc2","v5.19-rc3","v5.19-rc4","v5.19-rc5","v5.19-rc6","v5.19-rc7","v5.19-rc8","v5.5","v5.5-rc2","v5.5-rc3","v5.5-rc4","v5.5-rc5","v5.5-rc6","v5.5-rc7","v5.6","v5.6-rc1","v5.6-rc2","v5.6-rc3","v5.6-rc4","v5.6-rc5","v5.6-rc6","v5.6-rc7","v5.7","v5.7-rc1","v5.7-rc2","v5.7-rc3","v5.7-rc4","v5.7-rc5","v5.7-rc6","v5.7-rc7","v5.8","v5.8-rc1","v5.8-rc2","v5.8-rc3","v5.8-rc4","v5.8-rc5","v5.8-rc6","v5.8-rc7","v5.9","v5.9-rc1","v5.9-rc2","v5.9-rc3","v5.9-rc4","v5.9-rc5","v5.9-rc6","v5.9-rc7","v5.9-rc8","v6.0","v6.0-rc1","v6.0-rc2","v6.0-rc3","v6.0-rc4","v6.0-rc5","v6.0-rc6","v6.0-rc7","v6.1","v6.1-rc1","v6.1-rc2","v6.1-rc3","v6.1-rc4","v6.1-rc5","v6.1-rc6","v6.1-rc7","v6.1-rc8","v6.10","v6.10-rc1","v6.10-rc2","v6.10-rc3","v6.10-rc4","v6.10-rc5","v6.10-rc6","v6.10-rc7","v6.11","v6.11-rc1","v6.11-rc2","v6.11-rc3","v6.11-rc4","v6.11-rc5","v6.11-rc6","v6.11-rc7","v6.12","v6.12-rc1","v6.12-rc2","v6.12-rc3","v6.12-rc4","v6.12-rc5","v6.12-rc6","v6.12-rc7","v6.13","v6.13-rc1","v6.13-rc2","v6.13-rc3","v6.13-rc4","v6.13-rc5","v6.13-rc6","v6.13-rc7","v6.14","v6.14-rc1","v6.14-rc2","v6.14-rc3","v6.14-rc4","v6.14-rc5","v6.14-rc6","v6.14-rc7","v6.14.1","v6.14.2","v6.14.3","v6.14.4","v6.14.5","v6.14.6","v6.14.7","v6.14.8","v6.2","v6.2-rc1","v6.2-rc2","v6.2-rc3","v6.2-rc4","v6.2-rc5","v6.2-rc6","v6.2-rc7","v6.2-rc8","v6.3","v6.3-rc1","v6.3-rc2","v6.3-rc3","v6.3-rc4","v6.3-rc5","v6.3-rc6","v6.3-rc7","v6.4","v6.4-rc1","v6.4-rc2","v6.4-rc3","v6.4-rc4","v6.4-rc5","v6.4-rc6","v6.4-rc7","v6.5","v6.5-rc1","v6.5-rc2","v6.5-rc3","v6.5-rc4","v6.5-rc5","v6.5-rc6","v6.5-rc7","v6.6","v6.6-rc1","v6.6-rc2","v6.6-rc3","v6.6-rc4","v6.6-rc5","v6.6-rc6","v6.6-rc7","v6.7","v6.7-rc1","v6.7-rc2","v6.7-rc3","v6.7-rc4","v6.7-rc5","v6.7-rc6","v6.7-rc7","v6.7-rc8","v6.8","v6.8-rc1","v6.8-rc2","v6.8-rc3","v6.8-rc4","v6.8-rc5","v6.8-rc6","v6.8-rc7","v6.9","v6.9-rc1","v6.9-rc2","v6.9-rc3","v6.9-rc4","v6.9-rc5","v6.9-rc6","v6.9-rc7"],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2025-38042.json","vanir_signatures":[{"deprecated":false,"digest":{"function_hash":"232703085205631615297409571176270125536","length":3074},"id":"CVE-2025-38042-21bb4cb7","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0da30874729baeb01889b0eca16cfda122687503","target":{"file":"drivers/dma/ti/k3-udma-glue.c","function":"k3_udma_glue_request_rx_chn_priv"}},{"deprecated":false,"digest":{"line_hashes":["74364827506029450209440218734485831889","326895523212222325554706775103134256876","262981702502532891400048857737311905460","134300757966062361342140284671096853221","207866880504659407078692743299781443390"],"threshold":0.9},"id":"CVE-2025-38042-23cce0fc","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@d0dd9d133ef8fdc894e0be9aa27dc49ef5f813cb","target":{"file":"include/linux/dma/k3-udma-glue.h"}},{"deprecated":false,"digest":{"function_hash":"130380096815998343020394204989481282717","length":766},"id":"CVE-2025-38042-28aba8bf","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@d0dd9d133ef8fdc894e0be9aa27dc49ef5f813cb","target":{"file":"drivers/dma/ti/k3-udma-glue.c","function":"k3_udma_glue_reset_rx_chn"}},{"deprecated":false,"digest":{"function_hash":"232703085205631615297409571176270125536","length":3074},"id":"CVE-2025-38042-2b28027c","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@d0dd9d133ef8fdc894e0be9aa27dc49ef5f813cb","target":{"file":"drivers/dma/ti/k3-udma-glue.c","function":"k3_udma_glue_request_rx_chn_priv"}},{"deprecated":false,"digest":{"line_hashes":["235410797226880392507462582960196899422","35723580124936546778526344593256844662","19014856516091258947109360545710606370","260310526544953642023308271381824561966","16140647903597117192011282212314968102","177954291082076351954462416828253256171","286714339947538725121557076250022694007","57946665677034955926439394913925990392"],"threshold":0.9},"id":"CVE-2025-38042-2e5b7bc3","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@d0dd9d133ef8fdc894e0be9aa27dc49ef5f813cb","target":{"file":"drivers/net/ethernet/ti/am65-cpsw-nuss.c"}},{"deprecated":false,"digest":{"function_hash":"18436145373367783807374018442453491756","length":234},"id":"CVE-2025-38042-31190bfa","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0da30874729baeb01889b0eca16cfda122687503","target":{"file":"drivers/net/ethernet/ti/icssg/icssg_common.c","function":"prueth_reset_rx_chan"}},{"deprecated":false,"digest":{"line_hashes":["193060012792223505138866920432436737922","312466423409577415285844729521708003453","329773055685955991032874344263874991119","95822606263562874559484259467166695920"],"threshold":0.9},"id":"CVE-2025-38042-3a8eb747","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0da30874729baeb01889b0eca16cfda122687503","target":{"file":"drivers/net/ethernet/ti/icssg/icssg_common.c"}},{"deprecated":false,"digest":{"line_hashes":["74364827506029450209440218734485831889","326895523212222325554706775103134256876","262981702502532891400048857737311905460","134300757966062361342140284671096853221","207866880504659407078692743299781443390"],"threshold":0.9},"id":"CVE-2025-38042-50ffb189","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0da30874729baeb01889b0eca16cfda122687503","target":{"file":"include/linux/dma/k3-udma-glue.h"}},{"deprecated":false,"digest":{"function_hash":"216817756948708551158719710630663627348","length":599},"id":"CVE-2025-38042-5abad19f","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0da30874729baeb01889b0eca16cfda122687503","target":{"file":"drivers/net/ethernet/ti/am65-cpsw-nuss.c","function":"am65_cpsw_destroy_rxq"}},{"deprecated":false,"digest":{"function_hash":"216817756948708551158719710630663627348","length":599},"id":"CVE-2025-38042-5e1b1841","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@d0dd9d133ef8fdc894e0be9aa27dc49ef5f813cb","target":{"file":"drivers/net/ethernet/ti/am65-cpsw-nuss.c","function":"am65_cpsw_destroy_rxq"}},{"deprecated":false,"digest":{"line_hashes":["235410797226880392507462582960196899422","35723580124936546778526344593256844662","19014856516091258947109360545710606370","260310526544953642023308271381824561966","16140647903597117192011282212314968102","177954291082076351954462416828253256171","286714339947538725121557076250022694007","57946665677034955926439394913925990392"],"threshold":0.9},"id":"CVE-2025-38042-6fe81b7e","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0da30874729baeb01889b0eca16cfda122687503","target":{"file":"drivers/net/ethernet/ti/am65-cpsw-nuss.c"}},{"deprecated":false,"digest":{"function_hash":"306704363845648017354306939339359632212","length":1251},"id":"CVE-2025-38042-832e5fd4","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0da30874729baeb01889b0eca16cfda122687503","target":{"file":"drivers/dma/ti/k3-udma-glue.c","function":"k3_udma_glue_request_remote_rx_chn_common"}},{"deprecated":false,"digest":{"function_hash":"174167770472962766184814210169311278114","length":1224},"id":"CVE-2025-38042-912174eb","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0da30874729baeb01889b0eca16cfda122687503","target":{"file":"drivers/net/ethernet/ti/am65-cpsw-nuss.c","function":"am65_cpsw_nuss_register_ndevs"}},{"deprecated":false,"digest":{"function_hash":"18436145373367783807374018442453491756","length":234},"id":"CVE-2025-38042-93d1f3af","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@d0dd9d133ef8fdc894e0be9aa27dc49ef5f813cb","target":{"file":"drivers/net/ethernet/ti/icssg/icssg_common.c","function":"prueth_reset_rx_chan"}},{"deprecated":false,"digest":{"line_hashes":["89196373620419625723274854253656405922","139809783725048318967803723278845085496","231553754528880143891467181719215932631","262050617214956103664451555400372422303","50799972377288392038612190403291022804","313666407332586889152989170986466173255","17794796516416938535322689948727019805","113347826197900998852677761782987932137","200567141681273325704421927071384266210","314026814410780225422584752092192202466","114068123064809219801922653962747113009","131215104657089155707723948185363947759","212221860528462585573566751105497755632","323643666567598097130565387567943463662","9208490028884509417402067745941705700","297780413193639084884616461324479306785","214164492430442628141772417863089020976","15435302053117227937997838996673795420","244110688913012052576079394359834138861","55639502024360984092462966089468900044","204716858148531228395301060377090542656","97038805349355601330169111538418200421","137472174081017877679540226331459609569"],"threshold":0.9},"id":"CVE-2025-38042-a1762b46","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0da30874729baeb01889b0eca16cfda122687503","target":{"file":"drivers/dma/ti/k3-udma-glue.c"}},{"deprecated":false,"digest":{"function_hash":"306704363845648017354306939339359632212","length":1251},"id":"CVE-2025-38042-a2457d67","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@d0dd9d133ef8fdc894e0be9aa27dc49ef5f813cb","target":{"file":"drivers/dma/ti/k3-udma-glue.c","function":"k3_udma_glue_request_remote_rx_chn_common"}},{"deprecated":false,"digest":{"line_hashes":["193060012792223505138866920432436737922","312466423409577415285844729521708003453","329773055685955991032874344263874991119","95822606263562874559484259467166695920"],"threshold":0.9},"id":"CVE-2025-38042-b92c0adb","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@d0dd9d133ef8fdc894e0be9aa27dc49ef5f813cb","target":{"file":"drivers/net/ethernet/ti/icssg/icssg_common.c"}},{"deprecated":false,"digest":{"line_hashes":["89196373620419625723274854253656405922","139809783725048318967803723278845085496","231553754528880143891467181719215932631","262050617214956103664451555400372422303","50799972377288392038612190403291022804","313666407332586889152989170986466173255","17794796516416938535322689948727019805","113347826197900998852677761782987932137","200567141681273325704421927071384266210","314026814410780225422584752092192202466","114068123064809219801922653962747113009","131215104657089155707723948185363947759","212221860528462585573566751105497755632","323643666567598097130565387567943463662","9208490028884509417402067745941705700","297780413193639084884616461324479306785","214164492430442628141772417863089020976","15435302053117227937997838996673795420","244110688913012052576079394359834138861","55639502024360984092462966089468900044","204716858148531228395301060377090542656","97038805349355601330169111538418200421","137472174081017877679540226331459609569"],"threshold":0.9},"id":"CVE-2025-38042-e603c6bf","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@d0dd9d133ef8fdc894e0be9aa27dc49ef5f813cb","target":{"file":"drivers/dma/ti/k3-udma-glue.c"}},{"deprecated":false,"digest":{"function_hash":"174167770472962766184814210169311278114","length":1224},"id":"CVE-2025-38042-e8052413","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@d0dd9d133ef8fdc894e0be9aa27dc49ef5f813cb","target":{"file":"drivers/net/ethernet/ti/am65-cpsw-nuss.c","function":"am65_cpsw_nuss_register_ndevs"}},{"deprecated":false,"digest":{"function_hash":"130380096815998343020394204989481282717","length":766},"id":"CVE-2025-38042-f3823a2e","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@0da30874729baeb01889b0eca16cfda122687503","target":{"file":"drivers/dma/ti/k3-udma-glue.c","function":"k3_udma_glue_reset_rx_chn"}}]}},{"package":{"name":"Kernel","ecosystem":"Linux"},"ranges":[{"type":"ECOSYSTEM","events":[{"introduced":"5.6.0"},{"fixed":"6.14.9"}]}],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2025-38042.json"}}],"references":[{"type":"PACKAGE","url":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git"},{"type":"WEB","url":"https://git.kernel.org/stable/c/0da30874729baeb01889b0eca16cfda122687503"},{"type":"WEB","url":"https://git.kernel.org/stable/c/d0dd9d133ef8fdc894e0be9aa27dc49ef5f813cb"}]}