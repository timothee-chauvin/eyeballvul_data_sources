{"schema_version":"1.7.3","id":"CVE-2025-38690","published":"2025-09-04T15:32:44.559Z","modified":"2025-11-20T09:48:49.433065Z","summary":"drm/xe/migrate: prevent infinite recursion","details":"In the Linux kernel, the following vulnerability has been resolved:\n\ndrm/xe/migrate: prevent infinite recursion\n\nIf the buf + offset is not aligned to XE_CAHELINE_BYTES we fallback to\nusing a bounce buffer. However the bounce buffer here is allocated on\nthe stack, and the only alignment requirement here is that it's\nnaturally aligned to u8, and not XE_CACHELINE_BYTES. If the bounce\nbuffer is also misaligned we then recurse back into the function again,\nhowever the new bounce buffer might also not be aligned, and might never\nbe until we eventually blow through the stack, as we keep recursing.\n\nInstead of using the stack use kmalloc, which should respect the\npower-of-two alignment request here. Fixes a kernel panic when\ntriggering this path through eudebug.\n\nv2 (Stuart):\n - Add build bug check for power-of-two restriction\n - s/EINVAL/ENOMEM/\n\n(cherry picked from commit 38b34e928a08ba594c4bbf7118aa3aadacd62fff)","affected":[{"ranges":[{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"270172f64b114451876c1b68912653e72ab99f38"},{"fixed":"89f511c024879c5812cc0c010a6663b5e49950f3"}]},{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"270172f64b114451876c1b68912653e72ab99f38"},{"fixed":"9d7a1cbebbb691891671def57407ba2f8ee914e8"}]}],"versions":["v6.15","v6.15-rc3","v6.15-rc4","v6.15-rc5","v6.15-rc6","v6.15-rc7","v6.16","v6.16-rc1","v6.16-rc2","v6.16-rc3","v6.16-rc4","v6.16-rc5","v6.16-rc6","v6.16-rc7","v6.16.1","v6.17-rc1"],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2025-38690.json","vanir_signatures":[{"deprecated":false,"digest":{"line_hashes":["80495243585310732100556190194499036393","277460498277163971820096291151723121583","144901325492137251629738279993100578177","84357887269263096058162586711874281906","98546720758850293334030435664441613241","174425229470913203931806503215681996842","338629536849370204304601667526949167164","275629272479447995160078096804825539721","235876499957166621856160586207277498339","133849552428484121058413562579314684427","337969939307057368473544564464853813059","18216643325578598239382072452396255823","83218455662642551050113031190077916956","320996498117414322593901245712814112890","271476699182979016719066256044894828991","178237904124970642765452153014031625498","66363438414032453251572496536432667917","40485697623695531052854881334405623930","97745090406563638408091393084655172155","122940682540347600731080486099032581288","259697221886502122174724069462956666646","16329671220620568985898727019164394146","164618334057774089130554794856299129924","121338379728324802285264684897204235940","283156783371916784629806586228275476283","177230780452185752543905716024554997368","28681027450440636560541266324151788245","48965836902661040362351737591159166978","307862523765575858188044536771074880201"],"threshold":0.9},"id":"CVE-2025-38690-28cf25fb","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@89f511c024879c5812cc0c010a6663b5e49950f3","target":{"file":"drivers/gpu/drm/xe/xe_migrate.c"}},{"deprecated":false,"digest":{"line_hashes":["80495243585310732100556190194499036393","277460498277163971820096291151723121583","144901325492137251629738279993100578177","84357887269263096058162586711874281906","98546720758850293334030435664441613241","174425229470913203931806503215681996842","338629536849370204304601667526949167164","275629272479447995160078096804825539721","235876499957166621856160586207277498339","133849552428484121058413562579314684427","337969939307057368473544564464853813059","18216643325578598239382072452396255823","83218455662642551050113031190077916956","320996498117414322593901245712814112890","271476699182979016719066256044894828991","178237904124970642765452153014031625498","66363438414032453251572496536432667917","40485697623695531052854881334405623930","97745090406563638408091393084655172155","122940682540347600731080486099032581288","259697221886502122174724069462956666646","16329671220620568985898727019164394146","164618334057774089130554794856299129924","121338379728324802285264684897204235940","283156783371916784629806586228275476283","177230780452185752543905716024554997368","28681027450440636560541266324151788245","48965836902661040362351737591159166978","307862523765575858188044536771074880201"],"threshold":0.9},"id":"CVE-2025-38690-4ea6bcc7","signature_type":"Line","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@9d7a1cbebbb691891671def57407ba2f8ee914e8","target":{"file":"drivers/gpu/drm/xe/xe_migrate.c"}},{"deprecated":false,"digest":{"function_hash":"178970778314008446921358247893870571530","length":2188},"id":"CVE-2025-38690-66e5331a","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@89f511c024879c5812cc0c010a6663b5e49950f3","target":{"file":"drivers/gpu/drm/xe/xe_migrate.c","function":"xe_migrate_access_memory"}},{"deprecated":false,"digest":{"function_hash":"59371672769390761735677254018123386273","length":2193},"id":"CVE-2025-38690-87461384","signature_type":"Function","signature_version":"v1","source":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git@9d7a1cbebbb691891671def57407ba2f8ee914e8","target":{"file":"drivers/gpu/drm/xe/xe_migrate.c","function":"xe_migrate_access_memory"}}]}},{"package":{"name":"Kernel","ecosystem":"Linux"},"ranges":[{"type":"ECOSYSTEM","events":[{"introduced":"6.16.0"},{"fixed":"6.16.2"}]}],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2025-38690.json"}}],"references":[{"type":"PACKAGE","url":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git"},{"type":"WEB","url":"https://git.kernel.org/stable/c/89f511c024879c5812cc0c010a6663b5e49950f3"},{"type":"WEB","url":"https://git.kernel.org/stable/c/9d7a1cbebbb691891671def57407ba2f8ee914e8"}]}