{"schema_version":"1.7.3","id":"CVE-2023-54242","published":"2025-12-30T12:11:30.503Z","modified":"2026-01-05T21:19:00.724295Z","summary":"block, bfq: Fix division by zero error on zero wsum","details":"In the Linux kernel, the following vulnerability has been resolved:\n\nblock, bfq: Fix division by zero error on zero wsum\n\nWhen the weighted sum is zero the calculation of limit causes\na division by zero error. Fix this by continuing to the next level.\n\nThis was discovered by running as root:\n\nstress-ng --ioprio 0\n\nFixes divison by error oops:\n\n[  521.450556] divide error: 0000 [#1] SMP NOPTI\n[  521.450766] CPU: 2 PID: 2684464 Comm: stress-ng-iopri Not tainted 6.2.1-1280.native #1\n[  521.451117] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS rel-1.16.1-0-g3208b098f51a-prebuilt.qemu.org 04/01/2014\n[  521.451627] RIP: 0010:bfqq_request_over_limit+0x207/0x400\n[  521.451875] Code: 01 48 8d 0c c8 74 0b 48 8b 82 98 00 00 00 48 8d 0c c8 8b 85 34 ff ff ff 48 89 ca 41 0f af 41 50 48 d1 ea 48 98 48 01 d0 31 d2 <48> f7 f1 41 39 41 48 89 85 34 ff ff ff 0f 8c 7b 01 00 00 49 8b 44\n[  521.452699] RSP: 0018:ffffb1af84eb3948 EFLAGS: 00010046\n[  521.452938] RAX: 000000000000003c RBX: 0000000000000000 RCX: 0000000000000000\n[  521.453262] RDX: 0000000000000000 RSI: 0000000000000000 RDI: ffffb1af84eb3978\n[  521.453584] RBP: ffffb1af84eb3a30 R08: 0000000000000001 R09: ffff8f88ab8a4ba0\n[  521.453905] R10: 0000000000000000 R11: 0000000000000001 R12: ffff8f88ab8a4b18\n[  521.454224] R13: ffff8f8699093000 R14: 0000000000000001 R15: ffffb1af84eb3970\n[  521.454549] FS:  00005640b6b0b580(0000) GS:ffff8f88b3880000(0000) knlGS:0000000000000000\n[  521.454912] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033\n[  521.455170] CR2: 00007ffcbcae4e38 CR3: 00000002e46de001 CR4: 0000000000770ee0\n[  521.455491] PKRU: 55555554\n[  521.455619] Call Trace:\n[  521.455736]  <TASK>\n[  521.455837]  ? bfq_request_merge+0x3a/0xc0\n[  521.456027]  ? elv_merge+0x115/0x140\n[  521.456191]  bfq_limit_depth+0xc8/0x240\n[  521.456366]  __blk_mq_alloc_requests+0x21a/0x2c0\n[  521.456577]  blk_mq_submit_bio+0x23c/0x6c0\n[  521.456766]  __submit_bio+0xb8/0x140\n[  521.457236]  submit_bio_noacct_nocheck+0x212/0x300\n[  521.457748]  submit_bio_noacct+0x1a6/0x580\n[  521.458220]  submit_bio+0x43/0x80\n[  521.458660]  ext4_io_submit+0x23/0x80\n[  521.459116]  ext4_do_writepages+0x40a/0xd00\n[  521.459596]  ext4_writepages+0x65/0x100\n[  521.460050]  do_writepages+0xb7/0x1c0\n[  521.460492]  __filemap_fdatawrite_range+0xa6/0x100\n[  521.460979]  file_write_and_wait_range+0xbf/0x140\n[  521.461452]  ext4_sync_file+0x105/0x340\n[  521.461882]  __x64_sys_fsync+0x67/0x100\n[  521.462305]  ? syscall_exit_to_user_mode+0x2c/0x1c0\n[  521.462768]  do_syscall_64+0x3b/0xc0\n[  521.463165]  entry_SYSCALL_64_after_hwframe+0x5a/0xc4\n[  521.463621] RIP: 0033:0x5640b6c56590\n[  521.464006] Code: 00 f7 d8 64 89 01 48 83 c8 ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 44 00 00 80 3d 71 70 0e 00 00 74 17 b8 4a 00 00 00 0f 05 <48> 3d 00 f0 ff ff 77 48 c3 0f 1f 80 00 00 00 00 48 83 ec 18 89 7c","affected":[{"ranges":[{"type":"GIT","repo":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git","events":[{"introduced":"76f1df88bbc2f984eb0418cc90de0a8384e63604"},{"fixed":"1655cfc85250a224b0d9486c8136baeea33b9b5c"},{"fixed":"c0346a59d719461248c6dc6f21c9e55ef836b66f"},{"fixed":"e53413f8deedf738a6782cc14cc00bd5852ccf18"}]}],"versions":["v5.16","v5.16-rc4","v5.16-rc5","v5.16-rc6","v5.16-rc7","v5.16-rc8","v5.17","v5.17-rc1","v5.17-rc2","v5.17-rc3","v5.17-rc4","v5.17-rc5","v5.17-rc6","v5.17-rc7","v5.17-rc8","v5.18","v5.18-rc1","v5.18-rc2","v5.18-rc3","v5.18-rc4","v5.18-rc5","v5.18-rc6","v5.18-rc7","v5.19","v5.19-rc1","v5.19-rc2","v5.19-rc3","v5.19-rc4","v5.19-rc5","v5.19-rc6","v5.19-rc7","v5.19-rc8","v6.0","v6.0-rc1","v6.0-rc2","v6.0-rc3","v6.0-rc4","v6.0-rc5","v6.0-rc6","v6.0-rc7","v6.1","v6.1-rc1","v6.1-rc2","v6.1-rc3","v6.1-rc4","v6.1-rc5","v6.1-rc6","v6.1-rc7","v6.1-rc8","v6.1.1","v6.1.10","v6.1.11","v6.1.12","v6.1.13","v6.1.14","v6.1.15","v6.1.16","v6.1.17","v6.1.18","v6.1.19","v6.1.2","v6.1.20","v6.1.21","v6.1.22","v6.1.23","v6.1.24","v6.1.25","v6.1.26","v6.1.27","v6.1.28","v6.1.29","v6.1.3","v6.1.4","v6.1.5","v6.1.6","v6.1.7","v6.1.8","v6.1.9","v6.2","v6.2-rc1","v6.2-rc2","v6.2-rc3","v6.2-rc4","v6.2-rc5","v6.2-rc6","v6.2-rc7","v6.2-rc8","v6.3","v6.3-rc1","v6.3-rc2","v6.3-rc3","v6.3-rc4","v6.3-rc5","v6.3-rc6","v6.3-rc7","v6.3.1","v6.3.2","v6.3.3"],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2023-54242.json"}},{"package":{"name":"Kernel","ecosystem":"Linux"},"ranges":[{"type":"ECOSYSTEM","events":[{"introduced":"5.17.0"},{"fixed":"6.1.30"}]},{"type":"ECOSYSTEM","events":[{"introduced":"6.2.0"},{"fixed":"6.3.4"}]}],"database_specific":{"source":"https://storage.googleapis.com/cve-osv-conversion/osv-output/CVE-2023-54242.json"}}],"references":[{"type":"PACKAGE","url":"https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git"},{"type":"WEB","url":"https://git.kernel.org/stable/c/1655cfc85250a224b0d9486c8136baeea33b9b5c"},{"type":"WEB","url":"https://git.kernel.org/stable/c/c0346a59d719461248c6dc6f21c9e55ef836b66f"},{"type":"WEB","url":"https://git.kernel.org/stable/c/e53413f8deedf738a6782cc14cc00bd5852ccf18"},{"type":"ADVISORY","url":"https://github.com/CVEProject/cvelistV5/tree/main/cves/2023/54xxx/CVE-2023-54242.json"},{"type":"ADVISORY","url":"https://nvd.nist.gov/vuln/detail/CVE-2023-54242"}],"database_specific":{"cna_assigner":"Linux","osv_generated_from":"https://github.com/CVEProject/cvelistV5/tree/main/cves/2023/54xxx/CVE-2023-54242.json"}}